<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VABIRED - Validate Your Ideas</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
    <div class="container mt-4">
        <h2 class="text-center">🔍 VABIRED - Validate Business Ideas</h2>

        <!-- Search Subreddits -->
        <form method="post" action="/search_subreddits" class="mb-4">
            <label class="form-label">Find Subreddits related to:</label>
            <input type="text" name="keyword" class="form-control mb-2" required>
            <button type="submit" class="btn btn-primary">Search</button>
        </form>

        {% if subreddits %}
        <h4>🔎 Found Subreddits for "{{ keyword }}"</h4>
        <ul class="list-group">
            {% for sub in subreddits %}
            <li class="list-group-item"><a href="{{ sub.url }}" target="_blank">r/{{ sub.name }}</a> - {{ sub.subscribers }} subscribers</li>
            {% endfor %}
        </ul>
        {% endif %}

        <hr>

        <!-- Get Trending Posts -->
        <form method="post" action="/trending_posts" class="mb-4">
            <label class="form-label">Trending posts in subreddit:</label>
            <input type="text" name="subreddit" class="form-control mb-2" required>
            <select name="sort_by" class="form-select mb-2">
                <option value="hot">Hot</option>
                <option value="new">New</option>
                <option value="top">Top</option>
            </select>
            <button type="submit" class="btn btn-warning">Get Posts</button>
        </form>

        {% if trending %}
        <h4>🔥 Trending Posts in r/{{ subreddit_name }}</h4>
        <ul class="list-group">
            {% for post in trending %}
            <li class="list-group-item">
                <a href="{{ post.url }}" target="_blank">{{ post.title }}</a> - 👍 {{ post.score }} | 💬 {{ post.comments }}
            </li>
            {% endfor %}
        </ul>
        {% endif %}

        <hr>

        <!-- Search Posts Globally -->
        <form method="post" action="/search_posts" class="mb-4">
            <label class="form-label">Search Reddit for:</label>
            <input type="text" name="query" class="form-control mb-2" required>
            <button type="submit" class="btn btn-success">Search</button>
        </form>

        {% if posts %}
        <h4>🔎 Found Posts for "{{ query }}"</h4>
        <ul class="list-group">
            {% for post in posts %}
            <li class="list-group-item">
                <a href="{{ post.url }}" target="_blank">{{ post.title }}</a> - r/{{ post.subreddit }} | 👍 {{ post.score }} | 💬 {{ post.comments }}
            </li>
            {% endfor %}
        </ul>
        {% endif %}

        <hr>

        <!-- Filter High Engagement Posts -->
        <form method="post" action="/high_engagement_posts" class="mb-4">
            <label class="form-label">Find High Engagement Posts for:</label>
            <input type="text" name="query" class="form-control mb-2" required>
            <input type="number" name="min_upvotes" class="form-control mb-2" placeholder="Min Upvotes (Default: 100)">
            <input type="number" name="min_comments" class="form-control mb-2" placeholder="Min Comments (Default: 10)">
            <button type="submit" class="btn btn-danger">Search</button>
        </form>

        {% if filtered_posts %}
        <h4>📈 High Engagement Posts for "{{ query }}"</h4>
        <ul class="list-group">
            {% for post in filtered_posts %}
            <li class="list-group-item">
                <a href="{{ post.url }}" target="_blank">{{ post.title }}</a> - r/{{ post.subreddit }} | 👍 {{ post.score }} | 💬 {{ post.comments }}
            </li>
            {% endfor %}
        </ul>
        {% endif %}

    </div>
</body>
</html>

